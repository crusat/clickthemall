<!DOCTYPE html>
<html>
<head>
    <title>Click Them All</title>
</head>
<body>
    <div id="table"></div>
    <button id="button">Falling</button>
<script>

    // Генерация игрового массива
    function createArray(max_width, max_height, min_value, max_value) {
        var arr = [];
        for (var x = 0; x < max_width; x++) {
            arr.push([]);
            for (var y = 0; y < max_height; y++) {
                arr[x].push(Math.floor(min_value + Math.random()*(max_value-min_value+1)));
            }
        }
        return arr;
    }

    // Отображение игрового поля
    function render(arr) {
        var html = '<table border="1">';
        for (var y = 0; y < arr.length; y++) {
            html += '<tr>';
            for (var x = 0; x < arr[y].length; x++) {
                html += '<td>' + arr[y][x] + '</td>';
            }
            html += '</tr>';
        }
        html += '</table>';
        return html;
    }

    // Падение блоков сверху вниз, если в столбце есть пустые (равные нулю) блоки и слева направо, если столбец слева целиком пустой (только нули)
    function falling(arr) {
        // Переменная, которая показывает номер самого левого столбца с нулями
        var leftColumn = 0;
        // Перебираем все столбцы слева направо
        for(var x = 0; x < arr.length; x++) {
            // Записываем номер самой нижней строки
            var topRow = arr[0].length - 1;
            // Перебираем все строки снизу вверх
            for(var y = arr[0].length-1; y >= 0; y--) {
                // Если элемент со строкой Y и столбцом X не равен 0, то
                if(arr[y][x] !== 0) {
                    // Если строка поиска (topRow) находится ниже (ее индекс больше) строки Y
                    if(topRow > y) {
                        // Ставим на строку topRow найденное ненулевое значение
                        arr[topRow][leftColumn] = arr[y][x];
                        // А выше ставим ноль
                        arr[y][x] = 0;
                    }
                    // Поднимаем строку поиска нулей на одну позицию выше
                    topRow--;
                }
            }
            // Если самая нижняя строка столбца leftColumn равна нулю, то мы должны записать следующую строку в него
            if(arr[arr[0].length-1][leftColumn] !== 0) {
                // Иначе переходим к следующему столбцу
                leftColumn++;
            }
        }
        return arr;
    }


    var myarr;
    myarr = createArray(10,10, 3, 5);
    document.getElementById('table').innerHTML = render(myarr);
    document.getElementById('button').onclick = function() {
        var arr = falling(myarr);
        document.getElementById('table').innerHTML = render(arr);
    };
</script>
</body>
</html>